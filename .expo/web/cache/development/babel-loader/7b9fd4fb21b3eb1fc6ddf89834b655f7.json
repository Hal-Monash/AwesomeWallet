{"ast":null,"code":"\"use strict\";\n\nvar _reactJsxRuntime = require(\"react/jsx-runtime\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Popover = void 0;\n\nvar debounce_1 = __importDefault(require(\"lodash/debounce\"));\n\nvar PropTypes = __importStar(require(\"prop-types\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar PopoverGeometry_1 = require(\"./PopoverGeometry\");\n\nvar styles = react_native_1.StyleSheet.create({\n  container: _extends(_extends({}, react_native_1.StyleSheet.absoluteFillObject), {\n    opacity: 0,\n    backgroundColor: 'transparent'\n  }),\n  containerVisible: {\n    opacity: 1\n  },\n  background: _extends(_extends({}, react_native_1.StyleSheet.absoluteFillObject), {\n    backgroundColor: 'rgba(0,0,0,0.5)'\n  }),\n  popover: _extends(_extends({}, react_native_1.Platform.select({\n    ios: {\n      shadowColor: 'black',\n      shadowOffset: {\n        width: 0,\n        height: 2\n      },\n      shadowRadius: 2,\n      shadowOpacity: 0.4,\n      backgroundColor: 'transparent'\n    }\n  })), {\n    position: 'absolute'\n  }),\n  content: {\n    flexDirection: 'column',\n    position: 'absolute',\n    backgroundColor: '#f2f2f2',\n    padding: 8\n  },\n  arrow: {\n    position: 'absolute',\n    borderTopColor: '#f2f2f2',\n    borderRightColor: 'transparent',\n    borderBottomColor: 'transparent',\n    borderLeftColor: 'transparent'\n  }\n});\nvar ARROW_DEG = {\n  bottom: '-180deg',\n  start: react_native_1.I18nManager.isRTL ? '90deg' : '-90deg',\n  end: react_native_1.I18nManager.isRTL ? '-90deg' : '90deg',\n  top: '0deg'\n};\n\nvar Popover = function (_React$PureComponent) {\n  _inherits(Popover, _React$PureComponent);\n\n  var _super = _createSuper(Popover);\n\n  function Popover(props) {\n    var _this;\n\n    _classCallCheck(this, Popover);\n\n    _this = _super.call(this, props);\n\n    _this.computeGeometry = function (props, contentSize) {\n      return PopoverGeometry_1.computeGeometry(contentSize || _this.state.contentSize, props.placement, props.fromRect, props.displayArea || _this.defaultDisplayArea, props.arrowSize);\n    };\n\n    _this.onOrientationChange = function () {\n      var _a;\n\n      var dimensions = react_native_1.Dimensions.get('window');\n      _this.defaultDisplayArea = {\n        x: 10,\n        y: 10,\n        width: dimensions.width - 20,\n        height: dimensions.height - 20 - (_this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0)\n      };\n    };\n\n    _this.updateState = debounce_1.default(_this.setState, 100);\n\n    _this.measureContent = function (_ref) {\n      var _ref$nativeEvent$layo = _ref.nativeEvent.layout,\n          width = _ref$nativeEvent$layo.width,\n          height = _ref$nativeEvent$layo.height;\n\n      if (width && height) {\n        var contentSize = {\n          width: width,\n          height: height\n        };\n\n        var geom = _this.computeGeometry(_this.props, contentSize);\n\n        var isAwaitingShow = _this.state.isAwaitingShow;\n\n        _this.updateState(_extends(_extends({}, geom), {\n          contentSize: contentSize\n        }), function () {\n          if (isAwaitingShow) {\n            _this.startAnimation(true);\n          }\n        });\n      }\n    };\n\n    _this.getTranslateOrigin = function () {\n      var _this$state = _this.state,\n          contentSize = _this$state.contentSize,\n          origin = _this$state.origin,\n          anchor = _this$state.anchor;\n      var popoverCenter = {\n        x: origin.x + contentSize.width / 2,\n        y: origin.y + contentSize.height / 2\n      };\n      return {\n        x: anchor.x - popoverCenter.x,\n        y: anchor.y - popoverCenter.y\n      };\n    };\n\n    _this.startAnimation = function (show) {\n      var doneCallback = show ? undefined : _this.onHidden;\n      react_native_1.Animated.timing(_this.state.animation, {\n        toValue: show ? 1 : 0,\n        duration: _this.props.duration,\n        easing: _this.props.easing(show),\n        useNativeDriver: !!_this.props.useNativeDriver\n      }).start(doneCallback);\n    };\n\n    _this.onHidden = function () {\n      return _this.setState({\n        visible: false,\n        isAwaitingShow: false\n      });\n    };\n\n    _this.computeStyles = function () {\n      var _this$state2 = _this.state,\n          animation = _this$state2.animation,\n          anchor = _this$state2.anchor,\n          origin = _this$state2.origin;\n\n      var translateOrigin = _this.getTranslateOrigin();\n\n      var arrowSize = _this.props.arrowSize;\n      var width = arrowSize.width + 2;\n      var height = arrowSize.height * 2 + 2;\n      return {\n        background: [styles.background, _this.props.backgroundStyle, {\n          opacity: animation.interpolate({\n            inputRange: [0, 1],\n            outputRange: [0, 1],\n            extrapolate: 'clamp'\n          })\n        }],\n        arrow: [styles.arrow, _this.props.arrowStyle, {\n          width: width,\n          height: height,\n          borderTopWidth: height / 2,\n          left: anchor.x - origin.x - width / 2,\n          top: anchor.y - origin.y - height / 2,\n          borderEndWidth: width / 2,\n          borderBottomWidth: height / 2,\n          borderStartWidth: width / 2,\n          transform: [{\n            rotate: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [ARROW_DEG[_this.state.placement], ARROW_DEG[_this.state.placement]],\n              extrapolate: 'clamp'\n            })\n          }, {\n            scale: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [0, 1],\n              extrapolate: 'clamp'\n            })\n          }]\n        }],\n        popover: [styles.popover, _this.props.popoverStyle, {\n          top: origin.y,\n          left: origin.x\n        }],\n        content: [styles.content, _this.props.contentStyle, {\n          transform: [{\n            translateX: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [translateOrigin.x, 0],\n              extrapolate: 'clamp'\n            })\n          }, {\n            translateY: animation.interpolate({\n              inputRange: [0, 1],\n              outputRange: [translateOrigin.y, 0],\n              extrapolate: 'clamp'\n            })\n          }, {\n            scale: animation\n          }]\n        }]\n      };\n    };\n\n    _this.state = {\n      contentSize: {\n        width: 0,\n        height: 0\n      },\n      anchor: {\n        x: 0,\n        y: 0\n      },\n      origin: {\n        x: 0,\n        y: 0\n      },\n      placement: props.placement === 'auto' ? 'top' : props.placement,\n      visible: false,\n      isAwaitingShow: false,\n      animation: new react_native_1.Animated.Value(0)\n    };\n\n    _this.onOrientationChange();\n\n    return _this;\n  }\n\n  _createClass(Popover, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      var willBeVisible = nextProps.visible;\n      var _this$props = this.props,\n          visible = _this$props.visible,\n          fromRect = _this$props.fromRect,\n          displayArea = _this$props.displayArea;\n\n      if (willBeVisible !== visible) {\n        if (willBeVisible) {\n          this.setState({\n            contentSize: {\n              width: 0,\n              height: 0\n            },\n            isAwaitingShow: true,\n            visible: true\n          });\n        } else {\n          this.startAnimation(false);\n        }\n      } else if (willBeVisible && (fromRect !== nextProps.fromRect || displayArea !== nextProps.displayArea)) {\n        var geom = this.computeGeometry(nextProps, this.state.contentSize);\n        var isAwaitingShow = this.state.isAwaitingShow;\n        this.setState(_extends({}, geom), function () {\n          if (isAwaitingShow) {\n            _this2.startAnimation(true);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var visible = this.state.visible;\n      var _this$props2 = this.props,\n          onClose = _this$props2.onClose,\n          onDismiss = _this$props2.onDismiss,\n          supportedOrientations = _this$props2.supportedOrientations;\n      var computedStyles = this.computeStyles();\n      var contentSizeAvailable = this.state.contentSize.width;\n      return _reactJsxRuntime.jsx(react_native_1.Modal, {\n        transparent: true,\n        visible: visible,\n        onRequestClose: onClose,\n        onDismiss: onDismiss,\n        supportedOrientations: supportedOrientations,\n        onOrientationChange: this.onOrientationChange,\n        children: _reactJsxRuntime.jsxs(react_native_1.View, {\n          style: [styles.container, !!contentSizeAvailable && styles.containerVisible],\n          children: [_reactJsxRuntime.jsx(react_native_1.TouchableWithoutFeedback, {\n            onPress: this.props.onClose,\n            children: _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n              style: computedStyles.background\n            })\n          }), _reactJsxRuntime.jsxs(react_native_1.Animated.View, {\n            style: computedStyles.popover,\n            children: [_reactJsxRuntime.jsx(react_native_1.Animated.View, {\n              onLayout: this.measureContent,\n              style: computedStyles.content,\n              children: this.props.children\n            }), _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n              style: computedStyles.arrow\n            })]\n          })]\n        })\n      });\n    }\n  }]);\n\n  return Popover;\n}(React.PureComponent);\n\nexports.Popover = Popover;\nPopover.propTypes = {\n  visible: PropTypes.bool,\n  onClose: PropTypes.func,\n  onDismiss: PropTypes.func,\n  arrowSize: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number\n  }),\n  placement: PropTypes.oneOf(['left', 'top', 'right', 'bottom', 'auto']),\n  fromRect: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number\n  }),\n  displayArea: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number\n  }),\n  backgroundStyle: PropTypes.any,\n  arrowStyle: PropTypes.any,\n  popoverStyle: PropTypes.any,\n  contentStyle: PropTypes.any,\n  duration: PropTypes.number,\n  easing: PropTypes.func\n};\nPopover.defaultProps = {\n  visible: false,\n  onClose: function onClose() {},\n  onDismiss: function onDismiss() {},\n  arrowSize: {\n    width: 16,\n    height: 8\n  },\n  placement: 'auto',\n  duration: 300,\n  easing: function easing(show) {\n    return show ? react_native_1.Easing.out(react_native_1.Easing.back(1.70158)) : react_native_1.Easing.inOut(react_native_1.Easing.quad);\n  },\n  useNativeDriver: false,\n  calculateStatusBar: false\n};\nPopover.displayName = 'Popover';","map":{"version":3,"sources":["../src/Popover.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Popover = void 0;\nconst debounce_1 = __importDefault(require(\"lodash/debounce\"));\nconst PropTypes = __importStar(require(\"prop-types\"));\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst PopoverGeometry_1 = require(\"./PopoverGeometry\");\nconst styles = react_native_1.StyleSheet.create({\n    container: Object.assign(Object.assign({}, react_native_1.StyleSheet.absoluteFillObject), { opacity: 0, backgroundColor: 'transparent' }),\n    containerVisible: {\n        opacity: 1,\n    },\n    background: Object.assign(Object.assign({}, react_native_1.StyleSheet.absoluteFillObject), { backgroundColor: 'rgba(0,0,0,0.5)' }),\n    popover: Object.assign(Object.assign({}, react_native_1.Platform.select({\n        ios: {\n            shadowColor: 'black',\n            shadowOffset: { width: 0, height: 2 },\n            shadowRadius: 2,\n            shadowOpacity: 0.4,\n            backgroundColor: 'transparent',\n        },\n    })), { position: 'absolute' }),\n    content: {\n        flexDirection: 'column',\n        position: 'absolute',\n        backgroundColor: '#f2f2f2',\n        padding: 8,\n    },\n    arrow: {\n        position: 'absolute',\n        borderTopColor: '#f2f2f2',\n        borderRightColor: 'transparent',\n        borderBottomColor: 'transparent',\n        borderLeftColor: 'transparent',\n    },\n});\nconst ARROW_DEG = {\n    bottom: '-180deg',\n    start: react_native_1.I18nManager.isRTL ? '90deg' : '-90deg',\n    end: react_native_1.I18nManager.isRTL ? '-90deg' : '90deg',\n    top: '0deg',\n};\nclass Popover extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.computeGeometry = (props, contentSize) => PopoverGeometry_1.computeGeometry(contentSize || this.state.contentSize, props.placement, props.fromRect, props.displayArea || this.defaultDisplayArea, props.arrowSize);\n        this.onOrientationChange = () => {\n            var _a;\n            const dimensions = react_native_1.Dimensions.get('window');\n            this.defaultDisplayArea = {\n                x: 10,\n                y: 10,\n                width: dimensions.width - 20,\n                height: dimensions.height -\n                    20 -\n                    (this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0),\n            };\n        };\n        this.updateState = debounce_1.default(this.setState, 100);\n        this.measureContent = ({ nativeEvent: { layout: { width, height }, }, }) => {\n            if (width && height) {\n                const contentSize = { width, height };\n                const geom = this.computeGeometry(this.props, contentSize);\n                const isAwaitingShow = this.state.isAwaitingShow;\n                this.updateState(Object.assign(Object.assign({}, geom), { contentSize }), () => {\n                    if (isAwaitingShow) {\n                        this.startAnimation(true);\n                    }\n                });\n            }\n        };\n        this.getTranslateOrigin = () => {\n            const { contentSize, origin, anchor } = this.state;\n            const popoverCenter = {\n                x: origin.x + contentSize.width / 2,\n                y: origin.y + contentSize.height / 2,\n            };\n            return { x: anchor.x - popoverCenter.x, y: anchor.y - popoverCenter.y };\n        };\n        this.startAnimation = (show) => {\n            const doneCallback = show ? undefined : this.onHidden;\n            react_native_1.Animated.timing(this.state.animation, {\n                toValue: show ? 1 : 0,\n                duration: this.props.duration,\n                easing: this.props.easing(show),\n                useNativeDriver: !!this.props.useNativeDriver,\n            }).start(doneCallback);\n        };\n        this.onHidden = () => this.setState({ visible: false, isAwaitingShow: false });\n        this.computeStyles = () => {\n            const { animation, anchor, origin } = this.state;\n            const translateOrigin = this.getTranslateOrigin();\n            const arrowSize = this.props.arrowSize;\n            const width = arrowSize.width + 2;\n            const height = arrowSize.height * 2 + 2;\n            return {\n                background: [\n                    styles.background,\n                    this.props.backgroundStyle,\n                    {\n                        opacity: animation.interpolate({\n                            inputRange: [0, 1],\n                            outputRange: [0, 1],\n                            extrapolate: 'clamp',\n                        }),\n                    },\n                ],\n                arrow: [\n                    styles.arrow,\n                    this.props.arrowStyle,\n                    {\n                        width,\n                        height,\n                        borderTopWidth: height / 2,\n                        left: anchor.x - origin.x - width / 2,\n                        top: anchor.y - origin.y - height / 2,\n                        borderEndWidth: width / 2,\n                        borderBottomWidth: height / 2,\n                        borderStartWidth: width / 2,\n                        transform: [\n                            {\n                                rotate: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [\n                                        ARROW_DEG[this.state.placement],\n                                        ARROW_DEG[this.state.placement],\n                                    ],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                            {\n                                scale: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [0, 1],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                        ],\n                    },\n                ],\n                popover: [\n                    styles.popover,\n                    this.props.popoverStyle,\n                    { top: origin.y, left: origin.x },\n                ],\n                content: [\n                    styles.content,\n                    this.props.contentStyle,\n                    {\n                        transform: [\n                            {\n                                translateX: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [translateOrigin.x, 0],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                            {\n                                translateY: animation.interpolate({\n                                    inputRange: [0, 1],\n                                    outputRange: [translateOrigin.y, 0],\n                                    extrapolate: 'clamp',\n                                }),\n                            },\n                            { scale: animation },\n                        ],\n                    },\n                ],\n            };\n        };\n        this.state = {\n            contentSize: { width: 0, height: 0 },\n            anchor: { x: 0, y: 0 },\n            origin: { x: 0, y: 0 },\n            placement: props.placement === 'auto' ? 'top' : props.placement,\n            visible: false,\n            isAwaitingShow: false,\n            animation: new react_native_1.Animated.Value(0),\n        };\n        this.onOrientationChange();\n    }\n    componentDidMount() {\n        react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n    componentWillUnmount() {\n        react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n    }\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        const willBeVisible = nextProps.visible;\n        const { visible, fromRect, displayArea } = this.props;\n        if (willBeVisible !== visible) {\n            if (willBeVisible) {\n                this.setState({\n                    contentSize: { width: 0, height: 0 },\n                    isAwaitingShow: true,\n                    visible: true,\n                });\n            }\n            else {\n                this.startAnimation(false);\n            }\n        }\n        else if (willBeVisible &&\n            (fromRect !== nextProps.fromRect || displayArea !== nextProps.displayArea)) {\n            const geom = this.computeGeometry(nextProps, this.state.contentSize);\n            const isAwaitingShow = this.state.isAwaitingShow;\n            this.setState(Object.assign({}, geom), () => {\n                if (isAwaitingShow) {\n                    this.startAnimation(true);\n                }\n            });\n        }\n    }\n    render() {\n        const { visible } = this.state;\n        const { onClose, onDismiss, supportedOrientations } = this.props;\n        const computedStyles = this.computeStyles();\n        const contentSizeAvailable = this.state.contentSize.width;\n        return (<react_native_1.Modal transparent visible={visible} onRequestClose={onClose} onDismiss={onDismiss} supportedOrientations={supportedOrientations} onOrientationChange={this.onOrientationChange}>\n        <react_native_1.View style={[\n                styles.container,\n                !!contentSizeAvailable && styles.containerVisible,\n            ]}>\n          <react_native_1.TouchableWithoutFeedback onPress={this.props.onClose}>\n            <react_native_1.Animated.View style={computedStyles.background}/>\n          </react_native_1.TouchableWithoutFeedback>\n          <react_native_1.Animated.View style={computedStyles.popover}>\n            <react_native_1.Animated.View onLayout={this.measureContent} style={computedStyles.content}>\n              {this.props.children}\n            </react_native_1.Animated.View>\n            <react_native_1.Animated.View style={computedStyles.arrow}/>\n          </react_native_1.Animated.View>\n        </react_native_1.View>\n      </react_native_1.Modal>);\n    }\n}\nexports.Popover = Popover;\nPopover.propTypes = {\n    visible: PropTypes.bool,\n    onClose: PropTypes.func,\n    onDismiss: PropTypes.func,\n    arrowSize: PropTypes.shape({\n        x: PropTypes.number,\n        y: PropTypes.number,\n    }),\n    placement: PropTypes.oneOf(['left', 'top', 'right', 'bottom', 'auto']),\n    fromRect: PropTypes.shape({\n        x: PropTypes.number,\n        y: PropTypes.number,\n        width: PropTypes.number,\n        height: PropTypes.number,\n    }),\n    displayArea: PropTypes.shape({\n        x: PropTypes.number,\n        y: PropTypes.number,\n        width: PropTypes.number,\n        height: PropTypes.number,\n    }),\n    backgroundStyle: PropTypes.any,\n    arrowStyle: PropTypes.any,\n    popoverStyle: PropTypes.any,\n    contentStyle: PropTypes.any,\n    duration: PropTypes.number,\n    easing: PropTypes.func,\n};\nPopover.defaultProps = {\n    visible: false,\n    onClose: () => { },\n    onDismiss: () => { },\n    arrowSize: { width: 16, height: 8 },\n    placement: 'auto',\n    duration: 300,\n    easing: (show) => show ? react_native_1.Easing.out(react_native_1.Easing.back(1.70158)) : react_native_1.Easing.inOut(react_native_1.Easing.quad),\n    useNativeDriver: false,\n    calculateStatusBar: false,\n};\nPopover.displayName = 'Popover';\n//# sourceMappingURL=Popover.js.map"]},"metadata":{},"sourceType":"script"}