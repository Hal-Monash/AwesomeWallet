{"ast":null,"code":"\"use strict\";\n\nvar _reactJsxRuntime = require(\"react/jsx-runtime\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopoverTouchable = void 0;\n\nvar PropTypes = __importStar(require(\"prop-types\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar PopoverTouchable = function (_React$PureComponent) {\n  _inherits(PopoverTouchable, _React$PureComponent);\n\n  var _super = _createSuper(PopoverTouchable);\n\n  function PopoverTouchable(props) {\n    var _this;\n\n    _classCallCheck(this, PopoverTouchable);\n\n    _this = _super.call(this, props);\n\n    _this.onOrientationChange = function () {\n      if (_this.state.showPopover) {\n        requestAnimationFrame(_this.onPress);\n      }\n    };\n\n    _this.touchable = null;\n\n    _this.setRef = function (ref) {\n      _this.touchable = ref;\n    };\n\n    _this.onPress = function () {\n      var handle = react_native_1.findNodeHandle(_this.touchable);\n\n      if (handle) {\n        react_native_1.NativeModules.UIManager.measure(handle, _this.onTouchableMeasured);\n      }\n    };\n\n    _this.onTouchableMeasured = function (x0, y0, width, height, x, y) {\n      _this.setState({\n        showPopover: true,\n        popoverAnchor: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        }\n      }, function () {\n        if (_this.props.onPopoverDisplayed) {\n          _this.props.onPopoverDisplayed();\n        }\n      });\n    };\n\n    _this.onClosePopover = function () {\n      return _this.setState({\n        showPopover: false\n      });\n    };\n\n    _this.state = {\n      showPopover: false,\n      popoverAnchor: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n    return _this;\n  }\n\n  _createClass(PopoverTouchable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = React.Children.toArray(this.props.children);\n\n      if (children.length !== 2 || children[1] instanceof Number || children[1] instanceof String || children[1].type.displayName !== 'Popover') {\n        throw new Error('Popover touchable must have two children and the second one must be Popover');\n      }\n\n      return _reactJsxRuntime.jsxs(React.Fragment, {\n        children: [React.cloneElement(children[0], {\n          ref: this.setRef,\n          onPress: this.onPress\n        }), React.cloneElement(children[1], {\n          visible: this.state.showPopover,\n          onClose: this.onClosePopover,\n          fromRect: this.state.popoverAnchor\n        })]\n      });\n    }\n  }]);\n\n  return PopoverTouchable;\n}(React.PureComponent);\n\nexports.PopoverTouchable = PopoverTouchable;\nPopoverTouchable.propTypes = {\n  onPopoverDisplayed: PropTypes.func\n};","map":{"version":3,"sources":["../src/PopoverTouchable.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PopoverTouchable = void 0;\nconst PropTypes = __importStar(require(\"prop-types\"));\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nclass PopoverTouchable extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.onOrientationChange = () => {\n            if (this.state.showPopover) {\n                requestAnimationFrame(this.onPress);\n            }\n        };\n        this.touchable = null;\n        this.setRef = (ref) => {\n            this.touchable = ref;\n        };\n        this.onPress = () => {\n            const handle = react_native_1.findNodeHandle(this.touchable);\n            if (handle) {\n                react_native_1.NativeModules.UIManager.measure(handle, this.onTouchableMeasured);\n            }\n        };\n        this.onTouchableMeasured = (x0, y0, width, height, x, y) => {\n            this.setState({\n                showPopover: true,\n                popoverAnchor: { x, y, width, height },\n            }, () => {\n                if (this.props.onPopoverDisplayed) {\n                    this.props.onPopoverDisplayed();\n                }\n            });\n        };\n        this.onClosePopover = () => this.setState({ showPopover: false });\n        this.state = {\n            showPopover: false,\n            popoverAnchor: { x: 0, y: 0, width: 0, height: 0 },\n        };\n    }\n    componentDidMount() {\n        react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n    componentWillUnmount() {\n        react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n    }\n    render() {\n        const children = React.Children.toArray(this.props.children);\n        if (children.length !== 2 ||\n            children[1] instanceof Number ||\n            children[1] instanceof String ||\n            children[1].type.displayName !== 'Popover') {\n            throw new Error('Popover touchable must have two children and the second one must be Popover');\n        }\n        return (<React.Fragment>\n        {React.cloneElement(children[0], {\n                ref: this.setRef,\n                onPress: this.onPress,\n            })}\n        {React.cloneElement(children[1], {\n                visible: this.state.showPopover,\n                onClose: this.onClosePopover,\n                fromRect: this.state.popoverAnchor,\n            })}\n      </React.Fragment>);\n    }\n}\nexports.PopoverTouchable = PopoverTouchable;\nPopoverTouchable.propTypes = {\n    onPopoverDisplayed: PropTypes.func,\n};\n//# sourceMappingURL=PopoverTouchable.js.map"]},"metadata":{},"sourceType":"script"}