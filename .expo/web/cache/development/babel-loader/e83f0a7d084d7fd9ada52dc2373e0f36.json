{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopoverController = void 0;\n\nvar PropTypes = __importStar(require(\"prop-types\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar PopoverController = function (_React$PureComponent) {\n  _inherits(PopoverController, _React$PureComponent);\n\n  var _super = _createSuper(PopoverController);\n\n  function PopoverController() {\n    var _this;\n\n    _classCallCheck(this, PopoverController);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      showPopover: false,\n      popoverAnchor: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n\n    _this.onOrientationChange = function () {\n      if (_this.state.showPopover) {\n        requestAnimationFrame(_this.openPopover);\n      }\n    };\n\n    _this.touchable = null;\n\n    _this.setTouchableRef = function (ref) {\n      _this.touchable = ref;\n    };\n\n    _this.openPopover = function () {\n      var handle = react_native_1.findNodeHandle(_this.touchable);\n\n      if (handle) {\n        react_native_1.NativeModules.UIManager.measure(handle, _this.onTouchableMeasured);\n      }\n    };\n\n    _this.onTouchableMeasured = function (x0, y0, width, height, x, y) {\n      var _a;\n\n      var dimensions = react_native_1.Dimensions.get('window');\n\n      _this.setState({\n        showPopover: true,\n        popoverAnchor: {\n          x: react_native_1.I18nManager.isRTL ? dimensions.width - x : x,\n          y: y - (_this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0),\n          width: width,\n          height: height\n        }\n      });\n    };\n\n    _this.closePopover = function () {\n      return _this.setState({\n        showPopover: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PopoverController, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children({\n        openPopover: this.openPopover,\n        closePopover: this.closePopover,\n        setPopoverAnchor: this.setTouchableRef,\n        popoverVisible: this.state.showPopover,\n        popoverAnchorRect: this.state.popoverAnchor\n      });\n    }\n  }]);\n\n  return PopoverController;\n}(React.PureComponent);\n\nexports.PopoverController = PopoverController;\nPopoverController.propTypes = {\n  children: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["../src/PopoverController.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,SAAA,GAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;AACA,IAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;;;IA6Ba,iB;;;;;EAAb,6BAAA;IAAA;;IAAA;;;IAKE,MAAA,KAAA,GAAe;MACb,WAAW,EAAE,KADA;MAEb,aAAa,EAAE;QAAE,CAAC,EAAE,CAAL;QAAQ,CAAC,EAAE,CAAX;QAAc,KAAK,EAAE,CAArB;QAAwB,MAAM,EAAE;MAAhC;IAFF,CAAf;;IAaQ,MAAA,mBAAA,GAAsB,YAAK;MACjC,IAAI,MAAK,KAAL,CAAW,WAAf,EAA4B;QAE1B,qBAAqB,CAAC,MAAK,WAAN,CAArB;MACD;IACF,CALO;;IAOA,MAAA,SAAA,GAAiB,IAAjB;;IAEA,MAAA,eAAA,GAAkB,UAAC,GAAD,EAAa;MACrC,MAAK,SAAL,GAAiB,GAAjB;IACD,CAFO;;IAIA,MAAA,WAAA,GAAc,YAAK;MACzB,IAAM,MAAM,GAAG,cAAA,CAAA,cAAA,CAAe,MAAK,SAApB,CAAf;;MACA,IAAI,MAAJ,EAAY;QACV,cAAA,CAAA,aAAA,CAAc,SAAd,CAAwB,OAAxB,CAAgC,MAAhC,EAAwC,MAAK,mBAA7C;MACD;IACF,CALO;;IAOA,MAAA,mBAAA,GAAgD,UACtD,EADsD,EAEtD,EAFsD,EAGtD,KAHsD,EAItD,MAJsD,EAKtD,CALsD,EAMtD,CANsD,EAOpD;;;MACF,IAAM,UAAU,GAAG,cAAA,CAAA,UAAA,CAAW,GAAX,CAAe,QAAf,CAAnB;;MACA,MAAK,QAAL,CAAc;QACZ,WAAW,EAAE,IADD;QAEZ,aAAa,EAAE;UACb,CAAC,EAAE,cAAA,CAAA,WAAA,CAAY,KAAZ,GAAoB,UAAU,CAAC,KAAX,GAAmB,CAAvC,GAA2C,CADjC;UAEb,CAAC,EACC,CAAC,IACA,MAAK,KAAL,CAAW,kBAAX,GAAgC,CAAA,EAAA,GAAA,cAAA,CAAA,SAAA,CAAU,aAAV,MAAuB,IAAvB,IAAuB,EAAA,KAAA,KAAA,CAAvB,GAAuB,EAAvB,GAA2B,CAA3D,GAA+D,CAD/D,CAHU;UAKb,KAAK,EAAL,KALa;UAMb,MAAM,EAAN;QANa;MAFH,CAAd;IAWD,CApBO;;IAsBA,MAAA,YAAA,GAAe;MAAA,OAAM,MAAK,QAAL,CAAc;QAAE,WAAW,EAAE;MAAf,CAAd,CAAN;IAAA,CAAf;;IA5DV;EAuEC;;;;WA7DC,6BAAiB;MACf,cAAA,CAAA,UAAA,CAAW,gBAAX,CAA4B,QAA5B,EAAsC,KAAK,mBAA3C;IACD;;;WAED,gCAAoB;MAClB,cAAA,CAAA,UAAA,CAAW,mBAAX,CAA+B,QAA/B,EAAyC,KAAK,mBAA9C;IACD;;;WA8CD,kBAAM;MACJ,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB;QACzB,WAAW,EAAE,KAAK,WADO;QAEzB,YAAY,EAAE,KAAK,YAFM;QAGzB,gBAAgB,EAAE,KAAK,eAHE;QAIzB,cAAc,EAAE,KAAK,KAAL,CAAW,WAJF;QAKzB,iBAAiB,EAAE,KAAK,KAAL,CAAW;MALL,CAApB,CAAP;IAOD;;;;EAtEoC,KAAK,CAAC,a;;AAA7C,OAAA,CAAA,iBAAA,GAAA,iBAAA;AACS,iBAAA,CAAA,SAAA,GAAY;EACjB,QAAQ,EAAE,SAAS,CAAC,IAAV,CAAe;AADR,CAAZ","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PopoverController = void 0;\nconst PropTypes = __importStar(require(\"prop-types\"));\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nclass PopoverController extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            showPopover: false,\n            popoverAnchor: { x: 0, y: 0, width: 0, height: 0 },\n        };\n        this.onOrientationChange = () => {\n            if (this.state.showPopover) {\n                requestAnimationFrame(this.openPopover);\n            }\n        };\n        this.touchable = null;\n        this.setTouchableRef = (ref) => {\n            this.touchable = ref;\n        };\n        this.openPopover = () => {\n            const handle = react_native_1.findNodeHandle(this.touchable);\n            if (handle) {\n                react_native_1.NativeModules.UIManager.measure(handle, this.onTouchableMeasured);\n            }\n        };\n        this.onTouchableMeasured = (x0, y0, width, height, x, y) => {\n            var _a;\n            const dimensions = react_native_1.Dimensions.get('window');\n            this.setState({\n                showPopover: true,\n                popoverAnchor: {\n                    x: react_native_1.I18nManager.isRTL ? dimensions.width - x : x,\n                    y: y -\n                        (this.props.calculateStatusBar ? (_a = react_native_1.StatusBar.currentHeight) !== null && _a !== void 0 ? _a : 0 : 0),\n                    width,\n                    height,\n                },\n            });\n        };\n        this.closePopover = () => this.setState({ showPopover: false });\n    }\n    componentDidMount() {\n        react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    }\n    componentWillUnmount() {\n        react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n    }\n    render() {\n        return this.props.children({\n            openPopover: this.openPopover,\n            closePopover: this.closePopover,\n            setPopoverAnchor: this.setTouchableRef,\n            popoverVisible: this.state.showPopover,\n            popoverAnchorRect: this.state.popoverAnchor,\n        });\n    }\n}\nexports.PopoverController = PopoverController;\nPopoverController.propTypes = {\n    children: PropTypes.func.isRequired,\n};\n//# sourceMappingURL=PopoverController.js.map"]},"metadata":{},"sourceType":"script"}